<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revisão</title>
    <link rel="stylesheet" href="revisao.css">
        <link rel="stylesheet" href="controllerStyle.css">

</head>
<body onload="start()" class= "body">
    <img class="guia" src="img/imgRevisão/guia1.jpg" alt=""> 

    <div class="main">
        <main>
            <div class="volta" onclick="window.location.href='pixComChave2.html'"></div>
            <div class="containerSaldo">
                <p class="rs">R$</p>
                <p class="saldo" id="saldo">4,49</p>
            </div>
            <div class="containerPreco">
                <p class="valorAPagar">Valor a pagar</p>
                <span class="containerInputPreco">
                    <label for="valor" class="rsInput">R$</label>
                    <p class="input" name="valor" id="valor" >0,01</p>
                </span>
            </div>

            <div class="containerInformacoes">
                <p class="title" id="tipoDeChave">Chave de Celular</p>
                <p class="info" id="chave">(24) 99842-8760</p>

                <p class="title">Nome</p>
                <p class="info" id="vitName">Ana Andreia Jerusaleno Mesquita</p>

                <p class="title">CPF/CNPJ</p>
                <p class="info" id="cpf">***.858.957-**</p>

                <p class="title">Instituição</p>
                <p class="info" id="banco">Banco Inter S.A.</p>

                <p class="title">Descrição</p>
                <p class="info" id="descricao">Não informado</p>
            </div>

        </main>
        <footer>
            <button class="button" onclick="pagar()">PAGAR</button>
        </footer>
    </div>

    <div class="iSafe">
        <div class="shadow"></div>
        <span>
            <div class="puxador"></div>
            <p>Clique em confirmar para autenticar sua transição pelo iSafe</p>
            <button class="button btnHover" onclick="confirmar()">confirmar</button>
        </span>
    </div>


    <script src="controllerSizeImg.js"></script>
    <script>
        function pagar() {
            document.querySelector(".iSafe").style.display = "flex"
        }
        function confirmar() {


        //salvar a hora do pagamento
        const data = new Date();

            let hora = data.getHours()
            let minutos = data.getMinutes()

            if(hora < 10){
                hora = "0" + hora
            }
            
            if(minutos < 10){
                minutos = "0" + minutos
            }
                
            localStorage.setItem("hora", hora + 'h' + minutos);
            

        //salvar a data do pagamento
            let dataCompleta = "Terça, 00/00/0000"
            let horaTxt = "00h00"

            localStorage.setItem("dataCompleta", dataCompleta);

            let dia = data.getUTCDate()
            let mes = data.getUTCMonth()+1

            if (mes == 13) {
                mes = 1
            }

            let ano = data.getFullYear()
            let semana = data.getDay()

            if(dia < 10){
                dia = "0" + dia
            }
            if(mes < 10){
                mes = "0" + mes
            }
            
            switch (semana) {
                    case 0:
                semana = 'Domingo'
                    break;

                    case 1:
                semana = 'Segunda'
                    break;

                    case 2:
                semana = 'Terça'
                    break;

                    case 3:
                semana = 'Quarta'
                    break;

                    case 4:
                semana = 'Quinta'
                    break;

                    case 5:
                semana = 'Sexta'
                    break;

                    case 6:
                semana = 'Sábado'
                    break;

            }

            let mesText = mes
            switch (mesText) {
                    case 1:
                mesText = 'Janeiro'
                    break;

                    case 2:
                mesText = 'Fevereiro'
                    break;

                    case 3:
                mesText = 'Março'
                    break;

                    case 4:
                mesText = 'Abril'
                    break;

                    case 5:
                mesText = 'Maio'
                    break;

                    case 6:
                mesText = 'Junho'
                    break;

                    case 7:
                mesText = 'Julho'
                    break;

                    case 8:
                mesText = 'Agosto'
                    break;

                    case 9:
                mesText = 'Setembro'
                    break;

                    case 10:
                mesText = 'Outubro'
                    break;

                    case 11:
                mesText = 'Novembro'
                    break;

                    case 12:
                mesText = 'Dezembro'
                    break;

            }

            if (hora >= 20) {
                dia = dia-1
            }

            dataCompleta = semana + ', ' + dia + "/" + mes +  "/" + ano

            localStorage.setItem("dataCompleta", dataCompleta);
            localStorage.setItem("mes", mesText);



            //Descontar do meu saldo
            let saldo = localStorage.getItem("saldo")
            let valor = localStorage.getItem("valor")


            localStorage.setItem("saldo", (saldo - valor).toFixed(2))

            window.location.href='comprovante.html'

        }
    </script>
    <script src="controller.js"></script>
    
</body>
</html>